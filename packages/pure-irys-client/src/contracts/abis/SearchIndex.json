{
  "_format": "hh-sol-artifact-1",
  "contractName": "SearchIndex",
  "sourceName": "contracts/SearchIndex.sol",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "keywordCount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "DocumentIndexed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "keywordCount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "DocumentReindexed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "DocumentRemovedFromIndex",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "documentKeywords",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "keyword",
          "type": "bytes32"
        }
      ],
      "name": "getDocumentCountForKeyword",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        }
      ],
      "name": "getDocumentKeywords",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "",
          "type": "bytes32[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "keyword",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        }
      ],
      "name": "getRelevanceScore",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getStatistics",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "documents",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "keywords",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32[]",
          "name": "keywords",
          "type": "bytes32[]"
        }
      ],
      "name": "indexDocument",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        }
      ],
      "name": "isIndexed",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "keywordIndex",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32[]",
          "name": "keywords",
          "type": "bytes32[]"
        }
      ],
      "name": "multiKeywordSearch",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "",
          "type": "bytes32[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32[]",
          "name": "newKeywords",
          "type": "bytes32[]"
        }
      ],
      "name": "reindexDocument",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "relevanceScores",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "docId",
          "type": "bytes32"
        }
      ],
      "name": "removeFromIndex",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "keyword",
          "type": "bytes32"
        }
      ],
      "name": "search",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "",
          "type": "bytes32[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "keyword",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "limit",
          "type": "uint256"
        }
      ],
      "name": "searchWithRelevance",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "docIds",
          "type": "bytes32[]"
        },
        {
          "internalType": "uint256[]",
          "name": "scores",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalIndexedDocuments",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalKeywords",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50610fb7806100206000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c80637fb922ca11610097578063a54c5ab611610066578063a54c5ab614610236578063a69cc84914610261578063c08ab9a014610274578063d8b88e1c146102a657600080fd5b80637fb922ca146101f15780638119c2a914610211578063830d67d81461021a57806397ad01301461022357600080fd5b80634d73e7d4116100d35780634d73e7d41461017d5780636bf7f8a61461019e57806374e4de3a146101c95780637ac132cf146101dc57600080fd5b806331b8a6971461010557806335de424d1461012e578063372d6b27146101415780634911dc331461015c575b600080fd5b610118610113366004610d26565b6102b9565b6040516101259190610d7a565b60405180910390f35b61011861013c366004610dd9565b610319565b60035460045460408051928352602083019190915201610125565b61016f61016a366004610e1b565b6105de565b604051908152602001610125565b61019061018b366004610e1b565b61060f565b604051610125929190610e3d565b61016f6101ac366004610e1b565b600160209081526000928352604080842090915290825290205481565b61016f6101d7366004610e1b565b610781565b6101ef6101ea366004610d26565b61079d565b005b61016f6101ff366004610d26565b60009081526020819052604090205490565b61016f60045481565b61016f60035481565b610118610231366004610d26565b6108be565b61016f610244366004610e1b565b600091825260016020908152604080842092845291905290205490565b6101ef61026f366004610e94565b61091e565b610296610282366004610d26565b600090815260026020526040902054151590565b6040519015158152602001610125565b6101ef6102b4366004610e94565b610b0b565b6000818152602081815260409182902080548351818402810184019094528084526060939283018282801561030d57602002820191906000526020600020905b8154815260200190600101908083116102f9575b50505050509050919050565b6060816103415760405162461bcd60e51b815260040161033890610ee0565b60405180910390fd5b60008060008585600081811061035957610359610f0f565b9050602002013581526020019081526020016000209050838390506001036103cf578054604080516020808402820181019092528281529183918301828280156103c257602002820191906000526020600020905b8154815260200190600101908083116103ae575b50505050509150506105d8565b8054600090819067ffffffffffffffff8111156103ee576103ee610f25565b604051908082528060200260200182016040528015610417578160200160208202803683370190505b50905060005b835481101561050157600084828154811061043a5761043a610f0f565b60009182526020909120015490506001805b888110156104b357600160008b8b8481811061046a5761046a610f0f565b9050602002013581526020019081526020016000206000848152602001908152602001600020546000036104a157600091506104b3565b806104ab81610f51565b91505061044c565b5080156104ec5760018484815181106104ce576104ce610f0f565b91151560209283029190910190910152846104e881610f51565b9550505b505080806104f990610f51565b91505061041d565b5060008267ffffffffffffffff81111561051d5761051d610f25565b604051908082528060200260200182016040528015610546578160200160208202803683370190505b5090506000805b85548110156105cf5783818151811061056857610568610f0f565b6020026020010151156105bd5785818154811061058757610587610f0f565b90600052602060002001548383815181106105a4576105a4610f0f565b6020908102919091010152816105b981610f51565b9250505b806105c781610f51565b91505061054d565b50909450505050505b92915050565b600260205281600052604060002081815481106105fa57600080fd5b90600052602060002001600091509150505481565b600082815260208190526040812080546060928392918510610632578154610634565b845b90508067ffffffffffffffff81111561064f5761064f610f25565b604051908082528060200260200182016040528015610678578160200160208202803683370190505b5093508067ffffffffffffffff81111561069457610694610f25565b6040519080825280602002602001820160405280156106bd578160200160208202803683370190505b50925060005b81811015610776578281815481106106dd576106dd610f0f565b90600052602060002001548582815181106106fa576106fa610f0f565b60200260200101818152505060016000888152602001908152602001600020600084838154811061072d5761072d610f0f565b906000526020600020015481526020019081526020016000205484828151811061075957610759610f0f565b60209081029190910101528061076e81610f51565b9150506106c3565b5050505b9250929050565b600060205281600052604060002081815481106105fa57600080fd5b600081815260026020526040902080546107f05760405162461bcd60e51b8152602060048201526014602482015273111bd8dd5b595b9d081b9bdd081a5b99195e195960621b6044820152606401610338565b60005b8154811015610853576001600083838154811061081257610812610f0f565b90600052602060002001548152602001908152602001600020600084815260200190815260200160002060009055808061084b90610f51565b9150506107f3565b50600082815260026020526040812061086b91610ca5565b6003805490600061087b83610f6a565b9190505550817f4c506a8b05e280c2bc9ca8caed2d69681b9e1b0aac8065661844c4420efc248e426040516108b291815260200190565b60405180910390a25050565b60008181526002602090815260409182902080548351818402810184019094528084526060939283018282801561030d57602002820191906000526020600020908154815260200190600101908083116102f95750505050509050919050565b8061093b5760405162461bcd60e51b815260040161033890610ee0565b60008381526002602052604090205461098d5760405162461bcd60e51b8152602060048201526014602482015273111bd8dd5b595b9d081b9bdd081a5b99195e195960621b6044820152606401610338565b6000838152600260205260408120905b81548110156109fd57600160008383815481106109bc576109bc610f0f565b9060005260206000200154815260200190815260200160002060008681526020019081526020016000206000905580806109f590610f51565b91505061099d565b506000848152600260205260409020610a17908484610cc6565b5060005b82811015610aca576000848483818110610a3757610a37610f0f565b90506020020135905060008082815260200190815260200160002080549050600003610a735760048054906000610a6d83610f51565b91905055505b600081815260208181526040808320805460018181018355918552838520018a905584845282528083208984529091528120805491610ab183610f51565b9190505550508080610ac290610f51565b915050610a1b565b506040805183815242602082015285917f0fbb4af37638813872548d5a921856f5d237e88e5f21a81bda5cd1642154e1ef910160405180910390a250505050565b80610b285760405162461bcd60e51b815260040161033890610ee0565b60008381526002602052604090205415610b845760405162461bcd60e51b815260206004820152601860248201527f446f63756d656e7420616c726561647920696e646578656400000000000000006044820152606401610338565b6000838152600260205260409020610b9d908383610cc6565b5060005b81811015610c50576000838383818110610bbd57610bbd610f0f565b90506020020135905060008082815260200190815260200160002080549050600003610bf95760048054906000610bf383610f51565b91905055505b6000818152602081815260408083208054600181810183559185528385200189905584845282528083208884529091528120805491610c3783610f51565b9190505550508080610c4890610f51565b915050610ba1565b5060038054906000610c6183610f51565b90915550506040805182815242602082015284917f38dbb3481b0f2949cc463d6532adbd80469af969adeaf3a285c543f6d81639e6910160405180910390a2505050565b5080546000825590600052602060002090810190610cc39190610d11565b50565b828054828255906000526020600020908101928215610d01579160200282015b82811115610d01578235825591602001919060010190610ce6565b50610d0d929150610d11565b5090565b5b80821115610d0d5760008155600101610d12565b600060208284031215610d3857600080fd5b5035919050565b600081518084526020808501945080840160005b83811015610d6f57815187529582019590820190600101610d53565b509495945050505050565b602081526000610d8d6020830184610d3f565b9392505050565b60008083601f840112610da657600080fd5b50813567ffffffffffffffff811115610dbe57600080fd5b6020830191508360208260051b850101111561077a57600080fd5b60008060208385031215610dec57600080fd5b823567ffffffffffffffff811115610e0357600080fd5b610e0f85828601610d94565b90969095509350505050565b60008060408385031215610e2e57600080fd5b50508035926020909101359150565b604081526000610e506040830185610d3f565b82810360208481019190915284518083528582019282019060005b81811015610e8757845183529383019391830191600101610e6b565b5090979650505050505050565b600080600060408486031215610ea957600080fd5b83359250602084013567ffffffffffffffff811115610ec757600080fd5b610ed386828701610d94565b9497909650939450505050565b6020808252601590820152744d7573742070726f76696465206b6579776f72647360581b604082015260600190565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610f6357610f63610f3b565b5060010190565b600081610f7957610f79610f3b565b50600019019056fea264697066735822122032358ce2ec5b8e08b1f52d9e102a2c4151fed451ef0177e43f2348c239c0c55f64736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106101005760003560e01c80637fb922ca11610097578063a54c5ab611610066578063a54c5ab614610236578063a69cc84914610261578063c08ab9a014610274578063d8b88e1c146102a657600080fd5b80637fb922ca146101f15780638119c2a914610211578063830d67d81461021a57806397ad01301461022357600080fd5b80634d73e7d4116100d35780634d73e7d41461017d5780636bf7f8a61461019e57806374e4de3a146101c95780637ac132cf146101dc57600080fd5b806331b8a6971461010557806335de424d1461012e578063372d6b27146101415780634911dc331461015c575b600080fd5b610118610113366004610d26565b6102b9565b6040516101259190610d7a565b60405180910390f35b61011861013c366004610dd9565b610319565b60035460045460408051928352602083019190915201610125565b61016f61016a366004610e1b565b6105de565b604051908152602001610125565b61019061018b366004610e1b565b61060f565b604051610125929190610e3d565b61016f6101ac366004610e1b565b600160209081526000928352604080842090915290825290205481565b61016f6101d7366004610e1b565b610781565b6101ef6101ea366004610d26565b61079d565b005b61016f6101ff366004610d26565b60009081526020819052604090205490565b61016f60045481565b61016f60035481565b610118610231366004610d26565b6108be565b61016f610244366004610e1b565b600091825260016020908152604080842092845291905290205490565b6101ef61026f366004610e94565b61091e565b610296610282366004610d26565b600090815260026020526040902054151590565b6040519015158152602001610125565b6101ef6102b4366004610e94565b610b0b565b6000818152602081815260409182902080548351818402810184019094528084526060939283018282801561030d57602002820191906000526020600020905b8154815260200190600101908083116102f9575b50505050509050919050565b6060816103415760405162461bcd60e51b815260040161033890610ee0565b60405180910390fd5b60008060008585600081811061035957610359610f0f565b9050602002013581526020019081526020016000209050838390506001036103cf578054604080516020808402820181019092528281529183918301828280156103c257602002820191906000526020600020905b8154815260200190600101908083116103ae575b50505050509150506105d8565b8054600090819067ffffffffffffffff8111156103ee576103ee610f25565b604051908082528060200260200182016040528015610417578160200160208202803683370190505b50905060005b835481101561050157600084828154811061043a5761043a610f0f565b60009182526020909120015490506001805b888110156104b357600160008b8b8481811061046a5761046a610f0f565b9050602002013581526020019081526020016000206000848152602001908152602001600020546000036104a157600091506104b3565b806104ab81610f51565b91505061044c565b5080156104ec5760018484815181106104ce576104ce610f0f565b91151560209283029190910190910152846104e881610f51565b9550505b505080806104f990610f51565b91505061041d565b5060008267ffffffffffffffff81111561051d5761051d610f25565b604051908082528060200260200182016040528015610546578160200160208202803683370190505b5090506000805b85548110156105cf5783818151811061056857610568610f0f565b6020026020010151156105bd5785818154811061058757610587610f0f565b90600052602060002001548383815181106105a4576105a4610f0f565b6020908102919091010152816105b981610f51565b9250505b806105c781610f51565b91505061054d565b50909450505050505b92915050565b600260205281600052604060002081815481106105fa57600080fd5b90600052602060002001600091509150505481565b600082815260208190526040812080546060928392918510610632578154610634565b845b90508067ffffffffffffffff81111561064f5761064f610f25565b604051908082528060200260200182016040528015610678578160200160208202803683370190505b5093508067ffffffffffffffff81111561069457610694610f25565b6040519080825280602002602001820160405280156106bd578160200160208202803683370190505b50925060005b81811015610776578281815481106106dd576106dd610f0f565b90600052602060002001548582815181106106fa576106fa610f0f565b60200260200101818152505060016000888152602001908152602001600020600084838154811061072d5761072d610f0f565b906000526020600020015481526020019081526020016000205484828151811061075957610759610f0f565b60209081029190910101528061076e81610f51565b9150506106c3565b5050505b9250929050565b600060205281600052604060002081815481106105fa57600080fd5b600081815260026020526040902080546107f05760405162461bcd60e51b8152602060048201526014602482015273111bd8dd5b595b9d081b9bdd081a5b99195e195960621b6044820152606401610338565b60005b8154811015610853576001600083838154811061081257610812610f0f565b90600052602060002001548152602001908152602001600020600084815260200190815260200160002060009055808061084b90610f51565b9150506107f3565b50600082815260026020526040812061086b91610ca5565b6003805490600061087b83610f6a565b9190505550817f4c506a8b05e280c2bc9ca8caed2d69681b9e1b0aac8065661844c4420efc248e426040516108b291815260200190565b60405180910390a25050565b60008181526002602090815260409182902080548351818402810184019094528084526060939283018282801561030d57602002820191906000526020600020908154815260200190600101908083116102f95750505050509050919050565b8061093b5760405162461bcd60e51b815260040161033890610ee0565b60008381526002602052604090205461098d5760405162461bcd60e51b8152602060048201526014602482015273111bd8dd5b595b9d081b9bdd081a5b99195e195960621b6044820152606401610338565b6000838152600260205260408120905b81548110156109fd57600160008383815481106109bc576109bc610f0f565b9060005260206000200154815260200190815260200160002060008681526020019081526020016000206000905580806109f590610f51565b91505061099d565b506000848152600260205260409020610a17908484610cc6565b5060005b82811015610aca576000848483818110610a3757610a37610f0f565b90506020020135905060008082815260200190815260200160002080549050600003610a735760048054906000610a6d83610f51565b91905055505b600081815260208181526040808320805460018181018355918552838520018a905584845282528083208984529091528120805491610ab183610f51565b9190505550508080610ac290610f51565b915050610a1b565b506040805183815242602082015285917f0fbb4af37638813872548d5a921856f5d237e88e5f21a81bda5cd1642154e1ef910160405180910390a250505050565b80610b285760405162461bcd60e51b815260040161033890610ee0565b60008381526002602052604090205415610b845760405162461bcd60e51b815260206004820152601860248201527f446f63756d656e7420616c726561647920696e646578656400000000000000006044820152606401610338565b6000838152600260205260409020610b9d908383610cc6565b5060005b81811015610c50576000838383818110610bbd57610bbd610f0f565b90506020020135905060008082815260200190815260200160002080549050600003610bf95760048054906000610bf383610f51565b91905055505b6000818152602081815260408083208054600181810183559185528385200189905584845282528083208884529091528120805491610c3783610f51565b9190505550508080610c4890610f51565b915050610ba1565b5060038054906000610c6183610f51565b90915550506040805182815242602082015284917f38dbb3481b0f2949cc463d6532adbd80469af969adeaf3a285c543f6d81639e6910160405180910390a2505050565b5080546000825590600052602060002090810190610cc39190610d11565b50565b828054828255906000526020600020908101928215610d01579160200282015b82811115610d01578235825591602001919060010190610ce6565b50610d0d929150610d11565b5090565b5b80821115610d0d5760008155600101610d12565b600060208284031215610d3857600080fd5b5035919050565b600081518084526020808501945080840160005b83811015610d6f57815187529582019590820190600101610d53565b509495945050505050565b602081526000610d8d6020830184610d3f565b9392505050565b60008083601f840112610da657600080fd5b50813567ffffffffffffffff811115610dbe57600080fd5b6020830191508360208260051b850101111561077a57600080fd5b60008060208385031215610dec57600080fd5b823567ffffffffffffffff811115610e0357600080fd5b610e0f85828601610d94565b90969095509350505050565b60008060408385031215610e2e57600080fd5b50508035926020909101359150565b604081526000610e506040830185610d3f565b82810360208481019190915284518083528582019282019060005b81811015610e8757845183529383019391830191600101610e6b565b5090979650505050505050565b600080600060408486031215610ea957600080fd5b83359250602084013567ffffffffffffffff811115610ec757600080fd5b610ed386828701610d94565b9497909650939450505050565b6020808252601590820152744d7573742070726f76696465206b6579776f72647360581b604082015260600190565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610f6357610f63610f3b565b5060010190565b600081610f7957610f79610f3b565b50600019019056fea264697066735822122032358ce2ec5b8e08b1f52d9e102a2c4151fed451ef0177e43f2348c239c0c55f64736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
